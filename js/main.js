"use strict";var app={city:void 0,data:null};app.card=document.querySelector(".card"),app.dialog=document.querySelector(".dialog"),app.spinner=document.querySelector(".loader"),app.nextDays=app.card.querySelectorAll(".future__oneday"),app.selectedDay=app.card.querySelector(".future__oneday--selected"),app.cityElement=app.dialog.querySelector(".textfield__input"),app.daysOfWeek=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],app.card.querySelector(".card__location").addEventListener("click",function(){app.cityElement.value=app.city,app.toggleDialog()}),app.dialog.querySelector(".dialog__surface").addEventListener("submit",function(e){e.preventDefault(),app.city=app.cityElement.value,app.toggleDialog(),app.getForecast(app.city),localStorage.city=app.city}),app.nextDays.forEach(function(t){t.addEventListener("click",function(e){return app.selectedDay.classList.remove("future__oneday--selected"),t.classList.add("future__oneday--selected"),app.selectedDay=t,app.setDay(t.getAttribute("data-day-id"))})}),app.toggleDialog=function(){app.dialog.classList.toggle("dialog--open")},app.getForecast=function(e){var t="https://api.openweathermap.org/data/2.5/forecast/daily?appid=".concat("2ed771d0697ad6d67d8930701487dd1f","&units=metric&q=").concat(e);"caches"in window&&caches.match(t).then(function(e){void 0!==e&&e.json().then(function(e){return app.updateForecast(e)})});var a=new XMLHttpRequest;a.addEventListener("load",function(){if(200===a.status){var e=JSON.parse(a.response);app.updateForecast(e)}}),a.open("GET",t),a.send()},app.updateForecast=function(r){app.data=r;var e=app.card,t=app.nextDays;e.querySelector(".card__location").textContent=r.city.name;var p=new Date;p=p.getDay(),t.forEach(function(e,t){var a=app.daysOfWeek[(t+p)%7],o=r.list[t];e.setAttribute("data-day-id",t),e.querySelector(".future__date").textContent=a,e.querySelector(".future__icon").style.backgroundImage='url("images/'.concat(o.weather[0].icon,'.svg")'),e.querySelector(".temp--high .temp__value").textContent=Math.round(o.temp.max),e.querySelector(".temp--low .temp__value").textContent=Math.round(o.temp.min)}),app.selectedDay.classList.remove("future__oneday--selected"),app.nextDays[0].classList.add("future__oneday--selected"),app.selectedDay=app.nextDays[0],app.setDay(0),app.spinner.setAttribute("hidden",!0)},app.setDay=function(e){var t=app.data.list[e],a=app.card;a.querySelector(".card__description").textContent=t.weather[0].description,a.querySelector(".visual__value").textContent=Math.round(t.temp.day),a.querySelector(".visual__icon").style.backgroundImage='url("images/'.concat(t.weather[0].icon,'.svg")'),a.querySelector(".description__wind .description__value").textContent=Math.round(t.speed),a.querySelector(".description__clouds .description__value").textContent=t.clouds},app.city=localStorage.city,void 0===app.city?app.toggleDialog():app.getForecast(app.city),"serviceWorker"in navigator&&navigator.serviceWorker.register("./sw.js").then(function(){console.log("Service Worker Registered")}).catch(function(e){console.log("Service Worker Filed to Register",e)});